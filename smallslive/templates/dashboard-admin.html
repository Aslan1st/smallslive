{% extends "base_admin.html" %}
{% load humanize %}
{% load thumbor_tags %}
{% block title %}Dashboard{% endblock title%}
{% block content %}
  <h1>Admin Calendar</h1>
  <div class="row">
    <div class="col-sm-12">
      
      <p><a href="{% url "event_add" %}"><button class="btn btn-primary">Add new event&hellip;</button></a> <a href="{% url "artist_add" %}"><button class="btn btn-primary">Add new artist</button></a></p>
      <ul class="nav nav-tabs">
        <li class="active"><a href="#upcoming" data-toggle="tab">Upcoming</a></li>
        <li><a href="#recent" data-toggle="tab">Recently Updated</a></li>
        <li><a href="#holds" data-toggle="tab">Date Holds/Drafts</a></li>
      </ul>
      <div class="tab-content">
        <div class="tab-pane active" id="recent">
          <table class="table table-condensed">
            <thead>
              <tr>
                <th>Gig Date</th>
                <th>Pic</th>
                <th>View Event</th>
                <th>Edit</th>
                <th>Not Registered?</th>
                <th>Last Updated</th>
              </tr>
            </thead>
            <tbody>
              {% for event in events %}
              <tr>
                <td class="event_date"><time datetime="{{ event.start|date:"c" }}">{{ event.start|date:"D, M. d" }}<br />{{ event.start|date:"Y - f a" }}</time></td>
                <td>{% if event.photo.url != "" %}
            <img src="{% thumbor_url event.photo.url|urlencode height=60 width=100 smart=True   %}" class="img-responsive artist-photo" />{% else %}<span class="text-danger">[missing photo]</span>
          {% endif %}</td>
                <td><a href="{{ event.get_absolute_url }}">{{ event.display_title }}</a></td>
                <td><a href="{% url "event_edit" pk=event.id %}">edit</a></td>
                <td><span class="text-danger">3/4</span> <a href="/static_page/invite-artists">Send invitation(s)&hellip;</a></td>
                <td class="text-muted">{{ event.last_modified_by.get_full_name }} {{ event.modified|naturaltime }}</td>
              </tr>
              {% endfor %}
              <tr><td colspan="4">Show 50 rows + use datatables to allow sorting and maybe filtering</td></tr>
            </tbody>
          </table>
        </div> 
        <div class="tab-pane" id="holds">
          <p>Table showing held (unconfirmed) gigs in next 60 days ordered by soonest first.</p>
        </div>
        <div class="tab-pane" id="upcoming">
          <div class="well">This would be a version of the calendar UI on calendar.html w/ all upcoming dates, holds, and open slots. (Yes, we would include drafts/holds in this view even thought those have a dedicated list view as well). However, all event links would point to the /edit and not the /detail view (unlike the public calendar.html screen).</div>
        </div> 
      </div> 
     
    </div>
 
  </div>
  <div class="dev">
    <h1>Dev notes</h1>
    <Ul> 
    </Ul>
  </div>
{% endblock content %}
