{% extends 'home_new.html' %}
{% load static from staticfiles %}
{% load thumbor_tags %}
{% load i18n %}

{% block homepage_nav_active %}active{% endblock %}

{% block title %}Smalls Jazz Club{% endblock %}

{# TODO Shouldn't be needed here #}
{% block body_class %}home headers-3{% endblock %}

{% block extra_nav %}
  <div class="search-tabs tabs">
    <div class="{% if not musician_search %}active{% endif %}" data-toggle-tab-target="archived-shows" data-toggle-tab-group="search-results">
      <span class="title1">Shows</span>
    </div>
    <div class="{% if musician_search %}active{% endif %}" data-toggle-tab-target="musicians" data-toggle-tab-group="search-results">
      <span class="title1">Musicians</span>
    </div>
  </div>
{% endblock %}

{% block extra_head %}
  <meta name="description" content="This is the official website for Smalls Jazz Club in Greenwich Village, New York City!">
{% endblock %}

{% block content %}

{% include 'inactive_dialog.html' %}
{% include 'become_a_supporter_dialog.html' %}

<div class="musicians-results white-line-bottom">
  {% if artists_block %}
    <div id="artist-subheader" class="showing-results text1">{{ showing_artist_results }}</div>
  {% endif %}
  <div class="title1 musicians-results-title">
    {% if artists_blocks %} Musicians
    {% else %} No musicians named "<span class="accent-color">{{ query_term }}</span>" found
    {% endif%}</div>
</div>
<div class="artist-search-profile-container pad-content"></div>

<div class="search-container pad-content">
    <section id="musicianContent"
             data-toggle-tab="musicians"
             class="search-tab-content {% if musician_search %}active{% endif %}"
             data-toggle-tab-group="search-results">
      {% if artists_blocks %}
        <div  class="search-artist-box-container hidden-xs">
          <img src="{% static 'image/search-icon.svg' %}">
          <input id="artist-search"
                 class="search-artist-box"
                 name="q" type="text"
                 placeholder="START TYPING AN ARTIST NAME"
                 autocomplete="off">

          <div class="instrument-btn white-border-button caret">Instrument</div>
        </div>
        <div class="instruments-container">
          <a href="#" class="close-button"></a>
          <div class="instrument text4" data-instrument="">All Instruments</div>
          {% for instrument in instruments %}
            <div data-instrument="{{ instrument }}" class="instrument text4 text-grey">{{ instrument }}</div>
          {% endfor %}
        </div>
        <div class="instrument-btn white-border-button visible-sm visible-xs visible-md caret">Instrument</div>


        <div class="container-list-article">

          <div class="left_arrow artist-arrow-search artist-arrow-disabled">

          </div>

          <div id="artist-load-gif" class="loading-image">
            <img src="{% static 'image/loading.gif' %}" alt="">
          </div>

          <main id="artists" class="artists-container invisible">
            {% include 'search/artist_results.html' %}
          </main>

          <div class="right_arrow artist-arrow-search"
               style="{% if artist_num_pages == 1 %}visibility: hidden;{% endif %}">
          </div>
        </div>

        <div class="white-border-button load-more-artist-button" onclick="loadMoreArtistButton()" style="{% if artist_num_pages == 1 %}visibility: hidden;{% endif %}">Load more</div>
        <div hidden class="artist-loading-gif mobile-artist-loading" style="height: 50px; margin-bottom: 30px;"></div>
        <div class="flex-row items-center content-space-between artist-arrows">
          <div class="left_arrow artist-arrow-search"></div>
          <div class="right_arrow artist-arrow-search"></div>
        </div>
      {% endif %}
    </section>
    <section class="search-content">
      {% include 'events/shows.html' with archived=True default_to_date=default_to_date secondary=True%}
    </section>
  </div>
{% endblock %}

{% block extra_js %}
  <script>
    var eventOrderFilter = 'newest';
    var datePickerInputSelector = '#search-date-picker-from input';
    var datePickerFromDate = null;
    var datePickerToDate = '{{ default_to_date }}';
    var setFromDate = false;
    var setToDate = true;
    var datePickerLeft = 45;
    var datePickerTop = 38;
    var defaultFromDate;
    var defaultToDate = '{{ default_to_date }}';
  </script>
  <script>
      $(document).ready(function(){
        foundArtistNumber = $(".artist-mobile").length
        if ( foundArtistNumber === 1 ){
          $uniqueArtist = $(".artist-mobile")[0];
          $($uniqueArtist).find(".artist-row")[0].click()
        }
       }) 
    $('.instruments-container .close-button').on('click', function() {
      $(this).closest('.instruments-container').hide();
    });
  </script>
  <script type="text/javascript" src="{% static 'js/moment.min.js' %}"></script>
  <script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
  <script src="{% static 'js/tabs.js' %}"></script>
  <script src="{% static 'js/search/search.js' %}"></script>
{% endblock %}

{% block footer %}
{% endblock %}


