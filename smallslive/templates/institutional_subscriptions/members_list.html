{% extends "smalls_base.html" %}
{% load add_get_parameter %}
{% load static from staticfiles %}
{% load thumbor_tags %}

{% block title %}Institution members list{% endblock %}

{% block schedule_nav_active %}active{% endblock %}

{% block content %}

    <div class="content-wrapper">
        <section class="page-heading container">
            <h1>Institution members list:</h1>
            <a href="{% url "institution_invite_members" pk=institution.id %}">Invite members</a>
        </section>
        <section class="artists-list__list container">
            <div class="artists-list__list__header row">
                <div class="col-xs-4">
                    Email
                </div>
                <div class="col-xs-4">
                    Name
                </div>
                <div class="col-xs-2">
                    Activated
                </div>
                <div class="col-xs-2">
                    Actions
                </div>
            </div>
            <ul>
                {% for member in members %}
                    <li class="artists-list__list__row row">
                        <div class="col-xs-4 artists-list__list__name">
                            {{ member.email }}
                        </div>
                        <div class="col-xs-4 artists-list__list__instrument">
                            {{ member.full_name }}
                        </div>
                        <div class="col-xs-2 artists-list__list__instrument">
                            <div class="artists-list__list__state"><i class="fa {% if member.has_activated_account %}fa-check-circle true{% else %}fa-times-circle{% endif %}"></i></div>
                        </div>
                        <div class="col-xs-2 artists-list__list__instrument">
                            <form action="{% url "institution_uninvite_member" institution_id=institution.id member_id=member.id %}" method="post">
                                {% csrf_token %}
                                <button type="submit">Delete</button>
                            </form>
                        </div>
                    </li>
                {% empty %}
                    <li class="artists-list__list__row--empty row">No members found</li>
                {% endfor %}
            </ul>
        </section>
        <section class="page-pagination artists-list__pagination container">
          <p class="search-pagination-info">Showing results {{ page_obj.start_index }}-{{ page_obj.end_index }}
            of {{ paginator.count }}</p>
          {% if page_obj.has_previous or page_obj.has_next %}
            <div class="search-pagination">
              {% if page_obj.has_previous %}<a href="{% add_get page=page_obj.previous_page_number %}"><span
                      class="search-pagination__previous fa fa-caret-left"></span></a>{% endif %}
              {% if show_first %}
                <a href="{% add_get page=1 %}"><span class="search-pagination__page">1</span></a>
                ...
              {% endif %}
              {% for page in page_numbers %}
                <a href="{% add_get page=page %}"><span
                        class="search-pagination__page {% if page == page_obj.number %}active{% endif %}">{{ page }}</span></a>
              {% endfor %}
              {% if show_last %}
                ...
                <a href="{% add_get page=paginator.num_pages %}"><span
                        class="search-pagination__page">{{ paginator.num_pages }}</span></a>
              {% endif %}
              {% if page_obj.has_next %}<a href="{% add_get page=page_obj.next_page_number %}"><span
                      class="search-pagination__next fa fa-caret-right"></span></a>{% endif %}

            </div>
          {% endif %}
        </section>
    </div>

{% endblock content %}

