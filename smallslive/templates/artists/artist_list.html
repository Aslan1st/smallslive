{% extends "smalls_base.html" %}
{% load static from staticfiles %}
{% load thumbor_tags %}

{% block schedule_nav_active %}active{% endblock %}

{% block content %}

    <div class="content-wrapper">
        <section class="page-heading container">
            <h1>Artists list:</h1>
        </section>
        <section class="artists-list__search">
            <form method="get" action="{% url "artist_list" %}">
                <span class="artists-list__search__heading">Search:</span>
                {{ filter.form.name }}
                <input type="submit" value="Search">
            </form>
        </section>
        <section class="artists-list__filters">
            <form method="get" action="{% url "artist_list" %}">
                <input type="hidden" name="name" value="{{request.GET.name}}">
                <ul>
                    <li class="artists-list__filters__group">
                        {{ filter.form.instruments.label_tag }}
                        {{ filter.form.instruments }}
                    </li>
                    <li class="artists-list__filters__group">
                        {{ filter.form.is_invited.label_tag }}
                        {{ filter.form.is_invited }}
                    </li>
                    <li class="artists-list__filters__group">
                        {{ filter.form.has_registered.label_tag }}
                        {{ filter.form.has_registered }}
                    </li>
                    <li class="artists-list__filters__group">
                        {{ filter.form.signed_legal_agreement.label_tag }}
                        {{ filter.form.signed_legal_agreement }}
                    </li>
                    <li class="artists-list__filters__group">
                        {{ filter.form.has_photo.label_tag }}
                        {{ filter.form.has_photo }}
                    </li>
                    <li class="artists-list__filters__group">
                        <input type="submit" value="Apply">
                    </li>
                </ul>
            </form>
        </section>
        <section class="artists-list__list container">
            <div class="artists-list__list__header row">
                <div class="hidden-xs col-sm-2 col-md-1">
                    Image
                </div>
                <div class="col-xs-5 col-sm-4 col-md-3">
                    Name
                </div>
                <div class="col-xs-4 col-sm-3 col-md-2">
                    Instrument
                </div>
                <div class="hidden-xs hidden-sm col-md-4 artists-list__list__states">
                    <div class="artists-list__list__state">Shows</div>
                    <div class="artists-list__list__state">Invited</div>
                    <div class="artists-list__list__state">Registered</div>
                    <div class="artists-list__list__state">Signed</div>
                    <div class="artists-list__list__state">Photo</div>
                </div>
                <div class="col-xs-3 col-sm-3 col-md-2 artists-list__list__actions">
                    Action(s)
                </div>
            </div>
            <ul>
                {% for artist in artists %}
                    <li class="artists-list__list__row row">
                        <div class="hidden-xs col-sm-2 col-md-1 artists-list__list__image">
                            {% if artist.photo %}
                                <img src="{% thumbor_url artist.photo.url|urlencode height=40 width=40 smart=True %}" alt="{{ artist.full_name }} photo"/>
                            {% else %}
                                <img src="{% static 'image/no-artist-photo-thumbnail.jpg' %}" alt="No photo available"/>
                            {% endif %}
                        </div>
                        <div class="col-xs-5 col-sm-4 col-md-3 artists-list__list__name">
                            {{ artist.full_name }}
                        </div>
                        <div class="col-xs-4 col-sm-3 col-md-2 artists-list__list__instrument">
                            {{ artist.instruments.all|join:" , " }}
                        </div>
                        <div class="hidden-xs hidden-sm col-md-4 artists-list__list__states">
                            <div class="artists-list__list__state">{{ artist.events.count }}</div>
                            <div class="artists-list__list__state"><i class="fa {% if request.GET.is_invited == "true" or artist.is_invited %}fa-check-circle true{% else %}fa-times-circle{% endif %}"></i></div>
                            <div class="artists-list__list__state"><i class="fa {% if request.GET.has_registered == "true" or artist.has_registered %}fa-check-circle true{% else %}fa-times-circle{% endif %}"></i></div>
                            <div class="artists-list__list__state"><i class="fa {% if request.GET.signed_legal == "true" or artist.has_signed_legal %}fa-check-circle true{% else %}fa-times-circle{% endif %}"></i></div>
                            <div class="artists-list__list__state">
                              {% if artist.photo %}
                                <i class="fa fa-check-circle true"></i>
                              {% else %}
                                <i class="fa fa-times-circle"></i>
                            {% endif %}
                            </div>
                        </div>
                        <div class="col-xs-3 col-sm-3 col-md-2 artists-list__list__actions">
                            <div class="btn-group">
                                <a href="{% url "artist_edit" pk=artist.id slug=artist.slug %}"><button type="button" class="btn">Edit</button></a>
                                <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                    <span class="caret"></span>
                                    <span class="sr-only">Toggle Dropdown</span>
                                </button>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="{% url "artist_edit" pk=artist.id slug=artist.slug %}">Edit</a></li>
                                    <li><a href="#" data-toggle="modal" data-target="#inviteArtist">Invite</a></li>
                                    <li class="divider"></li>
                                    {% comment %}<li class="warning"><a href="#">Delete artist</a></li>{% endcomment %}
                                </ul>
                            </div>
                        </div>
                    </li>
                {% empty %}
                    <li class="artists-list__list__row-empty row">No artists found.</li>
                {% endfor %}
            </ul>
        </section>
    </div>


    <!-- Invite artist modal -->
	<div class="modal fade" id="inviteArtist" tabindex="-1" role="dialog" aria-labelledby="inviteArtist" aria-hidden="true">
		<div class="modal-dialog">
            <div class="modal-content invite-artist-modal">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <div class="modal-body">
                    <form>
                          <div class="from-group">
                            <h2 class="invite-artist-modal__heading">Invite artist to SmallsLIVE</h2>
                            <p class="invite-artist-modal__text">This artist <b>hasn't yet been invited</b> to SmallsLIVE artist program. To invite this artist check the email address below (or enter a new one if one is currently not set) and press the "Invite Artist" button.</p>
                            <input type="email" class="form-control" name="artist-email" placeholder="Email address">
                            <input type="submit" value="Invite artist">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}